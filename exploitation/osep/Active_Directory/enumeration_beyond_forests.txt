#The first enumeration step is to map out any forest trusts. This can be done easily with .NET through the Forest.GetAllTrustRelationships1 method.
#we are enumerating from the perspective of the Offsec user from the prod.corp1.com domain.

([System.DirectoryServices.ActiveDirectory.Forest]::GetCurrentForest()).GetAllTrustRelationships()

#From powerview
Get-DomainTrust -Domain corp1.com

#If selective authentication is not enabled, we can enumerate trusts to child domains inside corp2.com with Get-DomainTrust 
#by specifying the root domain and then continue with any discovered child domains

#Given that manual enumeration of all domain and forest trusts is cumbersome in a large Active Directory infrastructure, 
#we can use the PowerView Get-DomainTrustMapping method to automate the process:

Get-DomainTrustMapping

#User in another forest
Get-DomainUser -Domain corp2.com

#Group in a trusted forest
Get-DomainForeignGroupMember -Domain corp2.com
convertfrom-sid S-1-5-21-3776646582-2086779273-4091361643-1601
