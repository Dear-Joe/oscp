#!/bin/bash
#this script get and download c code exploit and create a file cointaning the name of those exploit
#the first param is the version of os
#the second param is the folder inside which the script is going to be downloaded

#mkdir -r $2
echo > c_matched_exploit.txt
if [ -f c_guidefile.txt ]
then
rm c_guidefile.txt
fi
#read os_version

searchsploit --colour "$@" | grep "Privilege Escalation" --color=never | cut -d "|" -f2 | grep "\.c" --color=never > c_matched_exploit.txt

for i in $(cat c_matched_exploit.txt)
do
	#echo $i
	cp /usr/share/exploitdb/$i .
	ls  /usr/share/exploitdb/$i | rev | cut -d "/" -f1 | rev  >> c_guidefile.txt
done

#for i in $(ls | grep "\.c")
#do
#        echo $i >> guidefile.txt
#done
